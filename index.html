<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tarawih Schema ‚Äî Ramadan 2026</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=DM+Sans:wght@300;400;500;600&family=Share+Tech+Mono&display=swap" rel="stylesheet" />
  <link href="https://fonts.cdnfonts.com/css/digital-7-mono" rel="stylesheet">
  <style>
    :root {
      --primary: #24645d;
      --primary-dark: #1a4a44;
      --gold: #c9a84c;
      --gold-light: #e8c97a;
      --cream: #f7f4ef;
      --white: #ffffff;
      --text: #1a1a1a;
      --muted: #6b7280;
      --today-bg: #e8f7f0;
      --today-green: #3dba7e;
      --abdurrahman: #e8630a;
      --saed: #d4a800;
      --noor: #2980b9;
      --abdul: #2c2c2c;
      --mohammed: #219150;
      --yacquub: #7d3aac;
      --abdelsalam: #7b3f00;
      --hatem: #2d6a4f;
      --ibrahim: #1a6b8a;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: var(--cream); font-family: 'DM Sans', sans-serif; color: var(--text); -webkit-text-size-adjust: 100%; }

    /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
    header { background: var(--primary); padding: 28px 20px 22px; text-align: center; position: relative; overflow: hidden; }
    header::before { content: ''; position: absolute; inset: 0; background: radial-gradient(ellipse at 15% 60%, rgba(201,168,76,0.14) 0%, transparent 55%); }
    .ornament { display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 20px; position: relative; z-index: 2; }
    .orn-line { height: 1px; width: 50px; }
    .orn-line.l { background: linear-gradient(to right, transparent, var(--gold)); }
    .orn-line.r { background: linear-gradient(to left, transparent, var(--gold)); }
    .orn-diamond { width: 7px; height: 7px; background: var(--gold); transform: rotate(45deg); }
    .orn-dot { width: 3px; height: 3px; background: var(--gold-light); border-radius: 50%; }
    header h1 { font-family: 'Cormorant Garamond', serif; font-size: clamp(1.8rem, 6vw, 3.2rem); font-weight: 600; color: var(--white); letter-spacing: .03em; line-height: 1.2; position: relative; z-index: 2; }
    .header-address { margin-top: 20px; position: relative; z-index: 2; display: flex; flex-direction: column; align-items: center; gap: 10px; }
    .header-address .addr-text { display: flex; align-items: center; gap: 6px; color: rgba(255,255,255,.65); font-size: .82rem; }
    .header-address a { display: inline-flex; align-items: center; gap: 6px; background: #fff; color: var(--primary-dark); font-size: .75rem; font-weight: 600; letter-spacing: .08em; text-transform: uppercase; padding: 7px 18px; border-radius: 30px; text-decoration: none; box-shadow: 0 2px 12px rgba(0,0,0,.15); }
    .wave { background: var(--primary); line-height: 0; }
    .wave svg { display: block; width: 100%; }

    /* ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ */
    main { max-width: 960px; margin: 0 auto; padding: 32px 14px 80px; }

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       REDESIGNED TODAY CARD
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    .today-card {
      display: none;
      background: var(--white);
      border-radius: 22px;
      border: 1px solid rgba(36,100,93,0.10);
      box-shadow:
        0 2px 4px rgba(0,0,0,0.04),
        0 8px 24px rgba(36,100,93,0.10),
        0 24px 48px rgba(36,100,93,0.06);
      overflow: hidden;
      margin-bottom: 32px;
    }

    /* Glass-tinted header section */
    .today-card-top {
      position: relative;
      padding: 22px 28px 20px;
      background:
        linear-gradient(145deg,
          rgba(15,40,50,0.97) 0%,
          rgba(20,58,52,0.97) 40%,
          rgba(26,74,68,0.95) 70%,
          rgba(36,100,93,0.93) 100%
        );
      overflow: hidden;
    }
    /* Subtle texture overlay */
    .today-card-top::before {
      content: '';
      position: absolute;
      inset: 0;
      background:
        radial-gradient(ellipse at 80% 20%, rgba(201,168,76,0.08) 0%, transparent 55%),
        radial-gradient(ellipse at 20% 80%, rgba(36,100,93,0.15) 0%, transparent 45%);
      pointer-events: none;
    }
    /* Very subtle grain */
    .today-card-top::after {
      content: '';
      position: absolute;
      inset: 0;
      opacity: 0.025;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
      background-size: 128px;
      pointer-events: none;
    }

    /* Badge: DAGENS IMAM */
    .today-badge-pill {
      position: relative;
      z-index: 2;
      display: inline-flex;
      align-items: center;
      gap: 5px;
      background: rgba(201,168,76,0.15);
      border: 1px solid rgba(201,168,76,0.30);
      border-radius: 100px;
      padding: 4px 12px;
      margin-bottom: 10px;
    }
    .today-badge-pill-dot {
      width: 5px;
      height: 5px;
      border-radius: 50%;
      background: var(--gold-light);
      flex-shrink: 0;
      box-shadow: 0 0 5px rgba(201,168,76,0.6);
    }
    .today-badge-pill-text {
      font-size: 0.60rem;
      font-weight: 600;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--gold-light);
    }

    .today-card-header-content {
      position: relative;
      z-index: 2;
    }

    /* Imam name ‚Äî primary focus */
    .today-imam-name {
      font-family: 'Cormorant Garamond', serif;
      font-size: clamp(1.65rem, 5vw, 2.2rem);
      font-weight: 600;
      color: #ffffff;
      line-height: 1.1;
      letter-spacing: 0.01em;
      margin-bottom: 6px;
      display: block;
    }

    /* Date ‚Äî secondary */
    .today-date-row {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .today-date-text {
      font-size: 0.82rem;
      color: rgba(255,255,255,0.55);
      font-weight: 400;
      letter-spacing: 0.02em;
    }

    /* Moon badge (last 10 nights) */
    .today-moon-wrap {
      position: relative;
      display: inline-flex;
      align-items: center;
    }
    .today-moon-icon {
      display: inline-flex; align-items: center; justify-content: center;
      width: 22px; height: 22px; border-radius: 50%;
      background: rgba(15, 45, 94, 0.5);
      border: 1.5px solid rgba(255,255,255,0.2);
      cursor: default;
      animation: moonPulse 2s ease-in-out infinite;
    }
    @keyframes moonPulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(58,123,213,0.5); }
      50% { box-shadow: 0 0 0 6px rgba(58,123,213,0); }
    }
    .today-moon-tooltip {
      position: absolute;
      bottom: calc(100% + 8px);
      left: 50%;
      transform: translateX(-50%) translateY(4px);
      width: 240px;
      background: #0f2d5e;
      color: #fff;
      font-size: .72rem;
      line-height: 1.55;
      padding: 10px 12px;
      border-radius: 10px;
      box-shadow: 0 6px 20px rgba(0,0,0,.3);
      z-index: 200;
      pointer-events: none;
      font-style: italic;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.35s ease, visibility 0.35s ease, transform 0.35s ease;
    }
    .today-moon-tooltip::after {
      content: '';
      position: absolute;
      top: 100%; left: 50%;
      transform: translateX(-50%);
      border-left: 6px solid transparent;
      border-right: 6px solid transparent;
      border-top: 6px solid #0f2d5e;
    }
    .today-moon-wrap:hover .today-moon-tooltip,
    .today-moon-wrap.active .today-moon-tooltip {
      opacity: 1; visibility: visible; transform: translateX(-50%) translateY(0);
    }

    /* ‚îÄ‚îÄ Content body of today card ‚îÄ‚îÄ */
    .today-card-body {
      padding: 16px 28px 20px;
      display: flex;
      flex-direction: column;
      gap: 0;
    }

    /* Info row pair */
    .today-info-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1px;
      background: rgba(36,100,93,0.07);
      border-radius: 14px;
      overflow: hidden;
      margin-bottom: 14px;
    }
    .today-info-cell {
      background: #fff;
      padding: 12px 16px;
    }
    .today-info-cell:first-child { border-radius: 14px 0 0 14px; }
    .today-info-cell:last-child  { border-radius: 0 14px 14px 0; }
    @media (max-width: 480px) {
      .today-info-grid { grid-template-columns: 1fr; }
      .today-info-cell:first-child { border-radius: 14px 14px 0 0; }
      .today-info-cell:last-child  { border-radius: 0 0 14px 14px; }
    }
    .today-info-label {
      font-size: 0.60rem;
      font-weight: 600;
      letter-spacing: 0.13em;
      text-transform: uppercase;
      color: var(--muted);
      display: block;
      margin-bottom: 5px;
    }
    .today-info-value {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.35rem;
      font-weight: 600;
      color: var(--primary-dark);
      line-height: 1.2;
      display: block;
    }
    .today-info-sub {
      font-size: 0.75rem;
      color: var(--muted);
      margin-top: 3px;
      display: block;
      line-height: 1.4;
    }

    /* ‚îÄ‚îÄ Countdown section ‚îÄ‚îÄ */
    .today-countdown-section {
      display: none;
      background: rgba(36,100,93,0.04);
      border: 1px solid rgba(36,100,93,0.09);
      border-radius: 14px;
      padding: 13px 16px;
      margin-bottom: 14px;
      transition: background 0.8s ease, border-color 0.8s ease, box-shadow 0.8s ease;
    }
    .today-countdown-section.isha-done {
      background: rgba(36,186,120,0.08);
      border-color: rgba(36,186,120,0.25);
    }
    @keyframes ishaGlow {
      0%   { box-shadow: 0 0 0 0 rgba(61,186,126,0); }
      20%  { box-shadow: 0 0 0 8px rgba(61,186,126,0.18); }
      50%  { box-shadow: 0 0 0 16px rgba(61,186,126,0.08); }
      80%  { box-shadow: 0 0 0 8px rgba(61,186,126,0.12); }
      100% { box-shadow: 0 0 0 0 rgba(61,186,126,0); }
    }
    .today-countdown-section.isha-pulsing {
      animation: ishaGlow 1.6s ease-out 3;
    }
    .today-countdown-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }
    .today-countdown-left { flex: 1; min-width: 0; }
    .today-countdown-label {
      font-size: 0.60rem;
      font-weight: 600;
      letter-spacing: 0.13em;
      text-transform: uppercase;
      color: var(--muted);
      display: block;
      margin-bottom: 6px;
      transition: color 0.6s ease;
    }
    .isha-done .today-countdown-label { color: #1d7a4e; }

    /* Timer crossfade wrapper */
    .timer-wrap {
      position: relative;
      min-height: 2.2rem;
      display: flex;
      align-items: center;
    }
    .today-timer {
      font-family: 'Digital-7 Mono', 'Digital-7', monospace;
      font-size: 2.0rem;
      font-weight: 400;
      color: var(--primary-dark);
      letter-spacing: 0.05em;
      line-height: 1;
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    .today-timer.fading-out {
      opacity: 0;
      transform: translateY(-6px);
      pointer-events: none;
    }
    .today-timer-done {
      position: absolute;
      left: 0;
      font-family: 'DM Sans', sans-serif;
      font-size: 1.05rem;
      font-weight: 600;
      color: #1d7a4e;
      opacity: 0;
      transform: translateY(6px);
      transition: opacity 0.5s ease 0.3s, transform 0.5s ease 0.3s;
      white-space: nowrap;
    }
    .today-timer-done.fading-in {
      opacity: 1;
      transform: translateY(0);
    }
    .today-countdown-sub {
      font-size: 0.72rem;
      color: var(--muted);
      margin-top: 6px;
      display: block;
      transition: color 0.6s ease;
    }
    .isha-done .today-countdown-sub { color: #2d9e6b; }

    /* Notification bell button */
    .notif-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: none;
      border: 1px solid rgba(36,100,93,0.20);
      border-radius: 100px;
      padding: 5px 12px;
      font-size: 0.68rem;
      font-weight: 500;
      font-family: inherit;
      color: var(--muted);
      cursor: pointer;
      white-space: nowrap;
      transition: border-color 0.2s, color 0.2s, background 0.2s;
      flex-shrink: 0;
      align-self: flex-start;
    }
    .notif-btn:hover {
      border-color: var(--primary);
      color: var(--primary-dark);
      background: rgba(36,100,93,0.04);
    }
    .notif-btn.granted {
      border-color: rgba(36,186,120,0.35);
      color: #1d7a4e;
      background: rgba(36,186,120,0.06);
      cursor: default;
      pointer-events: none;
    }
    .notif-btn.denied {
      opacity: 0.4;
      cursor: not-allowed;
      pointer-events: none;
    }

    /* ‚îÄ‚îÄ CTA button ‚îÄ‚îÄ */
    .today-card-footer {
      display: flex;
      align-items: center;
      justify-content: flex-end;
    }
    .today-scroll-btn {
      display: inline-flex;
      align-items: center;
      gap: 7px;
      background: var(--primary-dark);
      color: #fff;
      font-size: 0.72rem;
      font-weight: 600;
      letter-spacing: 0.10em;
      text-transform: uppercase;
      padding: 10px 20px;
      border-radius: 100px;
      border: none;
      cursor: pointer;
      font-family: inherit;
      white-space: nowrap;
      box-shadow: 0 2px 12px rgba(26,74,68,0.25);
      transition: box-shadow 0.2s ease, transform 0.2s ease, background 0.2s ease;
    }
    .today-scroll-btn:hover {
      background: var(--primary);
      box-shadow: 0 4px 20px rgba(26,74,68,0.35);
      transform: translateY(-1px);
    }
    .today-scroll-btn svg { opacity: 0.8; }

    /* Hadith row */
    .today-hadith {
      display: flex;
      align-items: flex-start;
      gap: 8px;
      margin-bottom: 20px;
      padding: 14px 16px;
      background: rgba(15,45,94,0.05);
      border-left: 3px solid rgba(15,45,94,0.3);
      border-radius: 0 10px 10px 0;
      font-size: 0.76rem;
      color: #374151;
      font-style: italic;
      line-height: 1.6;
    }
    .today-hadith .moon-small {
      display: inline-flex; align-items: center; justify-content: center;
      width: 20px; height: 20px; border-radius: 50%;
      background: #0f2d5e; flex-shrink: 0; margin-top: 1px;
    }

    /* Pulsing animation for card */
    @keyframes cardPulse {
      0%   { box-shadow: 0 2px 4px rgba(0,0,0,.04), 0 8px 24px rgba(36,100,93,.10), 0 24px 48px rgba(36,100,93,.06), 0 0 0 0 var(--card-pulse, rgba(255,255,255,0.3)); }
      40%  { box-shadow: 0 2px 4px rgba(0,0,0,.04), 0 8px 24px rgba(36,100,93,.10), 0 24px 48px rgba(36,100,93,.06), 0 0 0 14px rgba(0,0,0,0); }
      66%  { box-shadow: 0 2px 4px rgba(0,0,0,.04), 0 8px 24px rgba(36,100,93,.10), 0 24px 48px rgba(36,100,93,.06), 0 0 0 0 rgba(0,0,0,0); }
      100% { box-shadow: 0 2px 4px rgba(0,0,0,.04), 0 8px 24px rgba(36,100,93,.10), 0 24px 48px rgba(36,100,93,.06), 0 0 0 0 rgba(0,0,0,0); }
    }
    .today-card.pulsing { animation: cardPulse 3s ease-out infinite; animation-delay: 0.5s; }

    /* ‚îÄ‚îÄ EID CARD ‚îÄ‚îÄ */
    .eid-card {
      display: none;
      position: relative;
      border-radius: 24px;
      padding: 52px 32px 44px;
      text-align: center;
      margin-bottom: 32px;
      overflow: hidden;
      background:
        linear-gradient(160deg,
          #0a1f3d 0%,
          #0f2d40 25%,
          #163d38 55%,
          #1a4a44 80%,
          #24645d 100%
        );
      box-shadow:
        0 2px 4px rgba(0,0,0,0.08),
        0 12px 40px rgba(10,31,61,0.35),
        0 32px 64px rgba(10,31,61,0.18);
      border: 1px solid rgba(201,168,76,0.12);
      animation: eidFadeUp 1.1s cubic-bezier(0.22,1,0.36,1) both;
    }

    @keyframes eidFadeUp {
      from { opacity: 0; transform: translateY(28px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* Radial gold glow top-left */
    .eid-card::before {
      content: '';
      position: absolute;
      inset: 0;
      background:
        radial-gradient(ellipse at 15% 20%, rgba(201,168,76,0.13) 0%, transparent 50%),
        radial-gradient(ellipse at 85% 80%, rgba(36,100,93,0.25) 0%, transparent 45%),
        radial-gradient(ellipse at 50% 50%, rgba(15,45,64,0.3) 0%, transparent 70%);
      pointer-events: none;
    }

    /* Subtle grain overlay */
    .eid-card::after {
      content: '';
      position: absolute;
      inset: 0;
      opacity: 0.03;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
      background-size: 128px;
      pointer-events: none;
    }

    .eid-inner { position: relative; z-index: 2; }

    /* Ornament top */
    .eid-ornament {
      display: flex; align-items: center; justify-content: center;
      gap: 10px; margin-bottom: 28px;
      animation: eidFadeUp 1.1s 0.15s cubic-bezier(0.22,1,0.36,1) both;
    }
    .eid-orn-line {
      height: 1px; width: 44px;
      background: linear-gradient(to right, transparent, rgba(201,168,76,0.6));
    }
    .eid-orn-line.r {
      background: linear-gradient(to left, transparent, rgba(201,168,76,0.6));
    }
    .eid-orn-diamond {
      width: 6px; height: 6px;
      background: var(--gold); transform: rotate(45deg);
    }
    .eid-orn-dot {
      width: 3px; height: 3px;
      background: var(--gold-light); border-radius: 50%;
    }

    /* Arabic text */
    .eid-arabic {
      font-family: 'Cormorant Garamond', serif;
      font-size: clamp(1.6rem, 5vw, 2.2rem);
      font-weight: 500;
      color: rgba(255,255,255,0.92);
      letter-spacing: 0.04em;
      line-height: 1.4;
      margin-bottom: 6px;
      direction: rtl;
      animation: eidFadeUp 1.1s 0.25s cubic-bezier(0.22,1,0.36,1) both;
    }

    /* Main title */
    .eid-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: clamp(2.6rem, 8vw, 4rem);
      font-weight: 700;
      color: #fff;
      line-height: 1.05;
      letter-spacing: 0.01em;
      margin-bottom: 10px;
      animation: eidFadeUp 1.1s 0.35s cubic-bezier(0.22,1,0.36,1) both;
      /* Gold shimmer sweep on the title */
      background: linear-gradient(
        105deg,
        #fff 0%,
        #fff 35%,
        var(--gold-light) 50%,
        #fff 65%,
        #fff 100%
      );
      background-size: 200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: eidFadeUp 1.1s 0.35s cubic-bezier(0.22,1,0.36,1) both,
                 eidShimmer 4s 1.5s ease-in-out infinite;
    }
    @keyframes eidShimmer {
      0%   { background-position: 200% center; }
      50%  { background-position: -50% center; }
      100% { background-position: 200% center; }
    }

    /* Gold divider */
    .eid-divider {
      display: flex; align-items: center; justify-content: center;
      gap: 8px; margin: 16px 0 18px;
      animation: eidFadeUp 1.1s 0.45s cubic-bezier(0.22,1,0.36,1) both;
    }
    .eid-divider-line { height: 1px; width: 36px; background: rgba(201,168,76,0.45); }
    .eid-divider-dot  { width: 4px; height: 4px; background: var(--gold); transform: rotate(45deg); border-radius: 0; }

    /* Transliteration */
    .eid-subtitle {
      font-size: 0.88rem;
      color: rgba(255,255,255,0.55);
      font-style: italic;
      letter-spacing: 0.06em;
      line-height: 1.6;
      animation: eidFadeUp 1.1s 0.52s cubic-bezier(0.22,1,0.36,1) both;
    }

    /* Closing note */
    .eid-note {
      margin-top: 28px;
      padding-top: 22px;
      border-top: 1px solid rgba(255,255,255,0.08);
      font-size: 0.78rem;
      color: rgba(255,255,255,0.38);
      letter-spacing: 0.03em;
      line-height: 1.7;
      animation: eidFadeUp 1.1s 0.62s cubic-bezier(0.22,1,0.36,1) both;
    }
    .eid-note strong { color: rgba(255,255,255,0.55); font-weight: 500; }

    /* Instagram link inside eid card */
    .eid-instagram {
      display: inline-flex; align-items: center; gap: 7px;
      margin-top: 18px;
      color: rgba(255,255,255,0.45);
      font-size: 0.76rem;
      text-decoration: none;
      letter-spacing: 0.04em;
      transition: color 0.2s;
      animation: eidFadeUp 1.1s 0.70s cubic-bezier(0.22,1,0.36,1) both;
    }
    .eid-instagram:hover { color: rgba(255,255,255,0.75); }

    /* Floating crescents */
    .eid-crescents {
      position: absolute; inset: 0; pointer-events: none; overflow: hidden;
    }
    .eid-crescent {
      position: absolute;
      font-size: 1.1rem;
      opacity: 0;
      animation: eidFloat var(--dur, 6s) var(--delay, 0s) ease-in-out infinite;
    }
    @keyframes eidFloat {
      0%   { opacity: 0; transform: translateY(0) rotate(var(--rot,0deg)) scale(0.8); }
      15%  { opacity: var(--max-op, 0.18); }
      85%  { opacity: var(--max-op, 0.18); }
      100% { opacity: 0; transform: translateY(-30px) rotate(var(--rot,15deg)) scale(1); }
    }

    /* ‚îÄ‚îÄ SECTION TITLE ‚îÄ‚îÄ */
    .section-title { text-align: center; margin-bottom: 20px; }
    .section-title h2 { font-family: 'Cormorant Garamond', serif; font-size: clamp(1.3rem, 4vw, 1.9rem); font-weight: 600; color: var(--primary-dark); }
    .divider { display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 10px; }
    .divider span { height: 1px; width: 40px; background: var(--gold); display: block; }
    .divider i { width: 5px; height: 5px; background: var(--gold); transform: rotate(45deg); display: block; }

    /* ‚îÄ‚îÄ LEGEND ‚îÄ‚îÄ */
    .legend { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; margin-bottom: 20px; }
    .legend-item { display: flex; align-items: center; gap: 6px; background: var(--white); border-radius: 30px; padding: 5px 12px 5px 8px; box-shadow: 0 2px 8px rgba(0,0,0,.06); font-size: .78rem; font-weight: 500; }
    .legend-dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }

    /* ‚îÄ‚îÄ TABLE ‚îÄ‚îÄ */
    .table-wrap { overflow-x: auto; border-radius: 16px; box-shadow: 0 6px 32px rgba(36,100,93,.12); }
    table { width: 100%; border-collapse: collapse; background: var(--white); font-size: .875rem; }
    thead tr { background: var(--primary); }
    thead th { font-size: .7rem; font-weight: 500; text-transform: uppercase; letter-spacing: .1em; color: rgba(255,255,255,.7); padding: 14px 16px; text-align: left; white-space: nowrap; }
    tbody tr { border-bottom: 1px solid rgba(36,100,93,.07); transition: background .15s; border-left: 4px solid transparent; }
    tbody tr:last-child { border-bottom: none; }
    tbody tr:hover { background: rgba(36,100,93,.04); }
    tbody tr.today { background: var(--today-bg) !important; border-left-color: var(--today-green); }
    td { padding: 12px 16px; vertical-align: middle; }
    .td-dag { font-weight: 700; font-size: .95rem; color: var(--primary-dark); text-align: center; }
    .td-sidor { font-size: .8rem; color: var(--muted); white-space: nowrap; }
    .td-surah { font-size: .78rem; color: var(--primary-dark); max-width: 240px; line-height: 1.4; }
    .td-datum { font-size: .8rem; color: var(--muted); white-space: nowrap; }
    .td-datum.today-date { color: #1d7a4e; font-weight: 600; }
    .td-veckodag { font-size: .8rem; font-weight: 500; white-space: nowrap; }
    .fredag { color: #b45309; font-weight: 700; }
    .lordag { color: var(--primary-dark); }
    .sondag { color: #b45309; }
    .imam-chip { display: inline-flex; align-items: center; gap: 6px; padding: 4px 11px 4px 8px; border-radius: 30px; font-size: .78rem; font-weight: 500; color: #fff; white-space: nowrap; }
    .imam-chip .dot { width: 6px; height: 6px; border-radius: 50%; background: rgba(255,255,255,.35); flex-shrink: 0; }
    .imam-abdurrahman { background: var(--abdurrahman); }
    .imam-saed { background: var(--saed); color: #1a1a1a !important; }
    .imam-saed .dot { background: rgba(0,0,0,.15) !important; }
    .imam-noor { background: var(--noor); }
    .imam-abdul { background: var(--abdul); }
    .imam-mohammed { background: var(--mohammed); }
    .imam-yacquub { background: var(--yacquub); }
    .imam-abdelsalam { background: var(--abdelsalam); }
    .imam-hatem { background: var(--hatem); }
    .imam-ibrahim { background: var(--ibrahim); }
    .today-badge { display: inline-block; background: var(--today-green); color: #fff; font-size: .6rem; font-weight: 700; text-transform: uppercase; letter-spacing: .08em; padding: 2px 6px; border-radius: 8px; margin-left: 5px; vertical-align: middle; }

    /* ‚îÄ‚îÄ TOOLTIP ‚îÄ‚îÄ */
    .surah-cell { position: relative; cursor: pointer; }
    .surah-names { font-size: .78rem; color: var(--primary-dark); line-height: 1.5; }
    .surah-names span { display: inline; }
    .tooltip-box {
      display: none;
      position: absolute;
      left: 0; top: calc(100% + 6px);
      background: var(--primary-dark);
      color: #fff;
      font-size: .75rem;
      font-weight: 500;
      padding: 7px 12px;
      border-radius: 8px;
      white-space: nowrap;
      z-index: 100;
      box-shadow: 0 4px 16px rgba(0,0,0,.25);
      letter-spacing: .02em;
      pointer-events: none;
    }
    .tooltip-box::before {
      content: '';
      position: absolute;
      top: -5px; left: 12px;
      border-left: 5px solid transparent;
      border-right: 5px solid transparent;
      border-bottom: 5px solid var(--primary-dark);
    }
    @media (hover: hover) { .surah-cell:hover .tooltip-box { display: block; } }
    .tooltip-box.visible { display: block; }

    /* ‚îÄ‚îÄ MOBILE CARDS ‚îÄ‚îÄ */
    .mobile-cards { display: none; }
    .day-card-mobile { background: var(--white); border-radius: 14px; padding: 14px 16px; margin-bottom: 10px; box-shadow: 0 2px 12px rgba(36,100,93,.08); border-left: 4px solid transparent; }
    .day-card-mobile.today { background: var(--today-bg); border-left-color: var(--today-green); }
    .dcm-top { display: flex; align-items: center; gap: 14px; margin-bottom: 8px; }
    .dcm-audio-right .play-btn { width: 34px; height: 34px; }
    .dcm-audio-right { display: flex; align-items: center; margin-left: auto; flex-shrink: 0; }
    .dcm-dag { font-weight: 700; font-size: 1.3rem; color: var(--primary-dark); min-width: 32px; text-align: center; flex-shrink: 0; }
    .dcm-dag.today-day { color: #1d7a4e; }
    .dcm-body { flex: 1; min-width: 0; }
    .dcm-imam { margin-bottom: 5px; }
    .dcm-meta { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
    .dcm-date { font-size: .75rem; color: var(--muted); }
    .dcm-day-label { font-size: .75rem; font-weight: 500; }
    .dcm-pages { font-size: .75rem; color: var(--muted); background: rgba(36,100,93,.08); padding: 2px 8px; border-radius: 10px; }
    .dcm-surahs { margin-left: 46px; font-size: .78rem; color: var(--primary-dark); background: rgba(36,100,93,.06); border-radius: 8px; padding: 6px 10px; line-height: 1.5; position: relative; cursor: pointer; }
    .dcm-surahs-label { font-size: .65rem; text-transform: uppercase; letter-spacing: .1em; color: var(--muted); display: block; margin-bottom: 2px; }
    .dcm-tooltip {
      max-height: 0; overflow: hidden; opacity: 0; margin-top: 0; padding: 0 10px;
      background: var(--primary-dark); color: #fff; font-size: .75rem; font-weight: 500;
      border-radius: 7px; letter-spacing: .02em;
      transition: max-height 0.45s cubic-bezier(0.4,0,0.2,1), opacity 0.35s ease, margin-top 0.35s ease, padding 0.35s ease;
    }
    .dcm-tooltip.visible { max-height: 80px; opacity: 1; margin-top: 6px; padding: 7px 10px; }

    /* ‚îÄ‚îÄ LAST 10 NIGHTS ‚îÄ‚îÄ */
    tbody tr.last-ten { background: var(--white); }
    tbody tr.last-ten.today { background: #0f2d5e !important; border-left-color: #3a7bd5; }
    tbody tr.last-ten.today td { color: #fff !important; }
    tbody tr.last-ten.today .td-sidor,
    tbody tr.last-ten.today .td-datum,
    tbody tr.last-ten.today .td-veckodag { color: rgba(255,255,255,0.75) !important; }
    tbody tr.last-ten.today .td-dag { color: #fff !important; }
    tbody tr.last-ten.today .today-date { color: #7eb8f7 !important; }
    tbody tr.last-ten.today .today-badge { background: #3a7bd5; }
    tbody tr.last-ten.today .td-surah .surah-names { color: rgba(255,255,255,0.9) !important; }
    tbody tr.last-ten.today .moon-icon { background: transparent !important; border: 2px solid rgba(255,255,255,0.8); box-shadow: none !important; }
    .day-card-mobile.last-ten.today .moon-icon { background: transparent !important; border: 2px solid rgba(255,255,255,0.8); box-shadow: none !important; }

    .moon-icon { display: inline-flex; align-items: center; justify-content: center; width: 20px; height: 20px; border-radius: 50%; background: #0f2d5e; vertical-align: middle; flex-shrink: 0; }
    .moon-icon.moon-odd { background: linear-gradient(135deg, #9a6f0a, #c9a84c); box-shadow: 0 0 7px rgba(201,168,76,0.55); }

    /* ‚îÄ‚îÄ AUDIO PLAY BUTTON ‚îÄ‚îÄ */
    .play-btn { display: inline-flex; align-items: center; justify-content: center; width: 28px; height: 28px; border-radius: 50%; background: var(--primary); border: none; cursor: pointer; color: #fff; flex-shrink: 0; box-shadow: 0 2px 8px rgba(36,100,93,.3); transition: transform 0.15s ease, box-shadow 0.15s ease; }
    .play-btn:hover { transform: scale(1.1); box-shadow: 0 4px 12px rgba(36,100,93,.4); }
    .play-btn.playing { background: #c0392b; }
    .play-btn svg { display: block; }
    .td-audio { text-align: center; width: 36px; padding: 12px 4px 12px 8px; }
    .dcm-audio { display: inline-flex; align-items: center; margin-left: 5px; }

    /* Desktop: moon cell */
    .td-moon { text-align: center; width: 32px; padding: 12px 8px 12px 0; }
    .moon-icon svg { display: block; }

    /* Moon tooltip */
    .moon-wrap { position: relative; display: inline-flex; align-items: center; }
    .moon-tooltip {
      position: absolute;
      bottom: calc(100% + 8px); right: 0;
      width: 240px;
      background: #0f2d5e; color: #fff;
      font-size: .72rem; line-height: 1.55;
      padding: 10px 12px; border-radius: 10px;
      box-shadow: 0 6px 20px rgba(0,0,0,.3);
      z-index: 200; pointer-events: none; font-style: italic;
      opacity: 0; visibility: hidden; transform: translateY(4px);
      transition: opacity 0.35s ease, visibility 0.35s ease, transform 0.35s ease;
    }
    .moon-tooltip::after {
      content: ''; position: absolute; top: 100%; right: 6px;
      border-left: 6px solid transparent; border-right: 6px solid transparent;
      border-top: 6px solid #0f2d5e;
    }
    .moon-wrap:hover .moon-tooltip, .moon-wrap.active .moon-tooltip { opacity: 1; visibility: visible; transform: translateY(0); }

    /* Mobile last-ten */
    .day-card-mobile.last-ten { background: var(--white); }
    .day-card-mobile.last-ten.today { background: #0f2d5e !important; border-left-color: #3a7bd5; }
    .day-card-mobile.last-ten.today .dcm-dag,
    .day-card-mobile.last-ten.today .dcm-date,
    .day-card-mobile.last-ten.today .dcm-day-label { color: rgba(255,255,255,0.85) !important; }
    .day-card-mobile.last-ten.today .imam-chip { opacity: 0.95; }
    .day-card-mobile.last-ten.today .dcm-surahs { background: rgba(255,255,255,0.08); color: rgba(255,255,255,0.9); }
    .day-card-mobile.last-ten.today .dcm-surahs-label { color: rgba(255,255,255,0.5); }
    .day-card-mobile.last-ten.today .dcm-pages { background: rgba(255,255,255,0.12); color: rgba(255,255,255,0.7); }
    .day-card-mobile.last-ten.today .today-badge { background: #3a7bd5; }
    .day-card-mobile.last-ten.today .dcm-dag.today-day { color: #7eb8f7 !important; }

    /* ‚îÄ‚îÄ STICKY BOTTOM PLAYER ‚îÄ‚îÄ */
    .sticky-player {
      position: fixed;
      bottom: 0; left: 0; right: 0;
      z-index: 9999;
      /* Shell: no bg/padding ‚Äî children own those */
    }

    /* Full player ‚Äî crushes down on scroll */
    .player-full {
      background: #fff;
      border-radius: 22px 22px 0 0;
      border-top: 1px solid rgba(36,100,93,.10);
      box-shadow: 0 -6px 32px rgba(0,0,0,.11);
      padding: 10px 18px 10px;
      transform-origin: bottom center;
      transform: translateY(0) scaleY(1);
      opacity: 1;
      /* Start hidden ‚Äî slides up when .visible added */
      transition:
        transform  0.52s cubic-bezier(0.4,0,0.2,1),
        opacity    0.28s ease,
        box-shadow 0.52s ease;
      will-change: transform, opacity;
      pointer-events: none;
    }
    .sticky-player.visible .player-full { pointer-events: auto; }
    /* Initial hidden state */
    .sticky-player:not(.visible):not(.mini-mode) .player-full {
      transform: translateY(100%);
      opacity: 0;
    }
    /* Scroll mini: crush downward */
    .sticky-player.mini-mode .player-full {
      transform: translateY(55%) scaleY(0.08);
      opacity: 0;
      box-shadow: none;
      pointer-events: none;
    }

    /* Top row */
    .sticky-top-row {
      display: flex; align-items: center; gap: 8px; margin-bottom: 6px; min-width: 0;
      transform-origin: top center;
      transition:
        transform 0.32s cubic-bezier(0.4,0,0.2,1),
        opacity   0.20s ease;
    }
    .sticky-player.mini-mode .sticky-top-row {
      transform: translateY(-8px) scaleY(0.3);
      opacity: 0;
    }

    .sticky-day-badge { font-size: .68rem; color: var(--primary-dark); font-weight: 700; white-space: nowrap; flex-shrink: 0; }
    .sticky-day-sub { font-size: .6rem; color: #9ca3af; font-weight: 400; white-space: nowrap; flex-shrink: 0; }
    .sticky-marquee-wrap { flex: 1; min-width: 0; overflow: hidden; position: relative; }
    .sticky-marquee-wrap.fading { mask-image: linear-gradient(to right, transparent 0%, black 8%, black 85%, transparent 100%); -webkit-mask-image: linear-gradient(to right, transparent 0%, black 8%, black 85%, transparent 100%); }
    .sticky-marquee-inner { display: inline-flex; white-space: nowrap; }
    .sticky-marquee-inner.scrolling { animation: marqueeScroll var(--marquee-dur, 18s) linear infinite; }
    .sticky-marquee-text { font-size: .68rem; color: #555; padding-right: 48px; }
    @keyframes marqueeScroll { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
    .sticky-times { font-size: .68rem; color: #9ca3af; font-variant-numeric: tabular-nums; white-space: nowrap; flex-shrink: 0; }

    /* Seek row */
    .sticky-seek-row { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
    .sticky-seek { flex: 1; height: 4px; border-radius: 4px; background: rgba(36,100,93,.15); position: relative; cursor: pointer; }
    .sticky-seek-fill { height: 100%; border-radius: 4px; background: var(--primary-dark); width: 0%; pointer-events: none; }
    .sticky-seek-thumb {
      position: absolute; top: 50%; left: 0%;
      width: 12px; height: 12px; border-radius: 50%;
      background: var(--primary-dark); border: 2px solid #fff;
      box-shadow: 0 1px 4px rgba(0,0,0,.2);
      transform: translate(-50%, -50%); pointer-events: none;
      transition: opacity 0.22s ease, transform 0.22s ease;
    }
    .sticky-player.mini-mode .sticky-seek-thumb {
      opacity: 0; transform: translate(-50%,-50%) scale(0.1);
    }

    /* Controls */
    .sticky-controls {
      display: flex; align-items: center; justify-content: center; gap: 24px;
      transform-origin: bottom center;
      transition: transform 0.30s cubic-bezier(0.4,0,0.2,1), opacity 0.20s ease;
    }
    .sticky-player.mini-mode .sticky-controls {
      transform: translateY(16px) scaleY(0.15);
      opacity: 0;
    }
    .sticky-ctrl-btn { background: none; border: none; cursor: pointer; color: var(--primary-dark); padding: 4px; opacity: .7; transition: opacity 0.15s ease, transform 0.15s ease; display: flex; align-items: center; justify-content: center; }
    .sticky-ctrl-btn:hover { opacity: 1; transform: scale(1.1); }
    .sticky-ctrl-btn:disabled { opacity: .25; cursor: default; transform: none; }
    .sticky-play-main { width: 36px; height: 36px; border-radius: 50%; background: var(--primary-dark); border: none; cursor: pointer; color: #fff; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 10px rgba(36,100,93,.35); transition: transform 0.15s ease, box-shadow 0.15s ease; }
    .sticky-play-main:hover { transform: scale(1.08); box-shadow: 0 4px 16px rgba(36,100,93,.4); }
    .sticky-play-main.red { background: #c0392b; }

    /* Mini panel ‚Äî springs up from below */
    .player-mini {
      position: absolute;
      bottom: 0; left: 0; right: 0;
      display: flex; flex-direction: column;
      background: rgba(255,255,255,0.96);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-radius: 18px 18px 0 0;
      border-top: 1px solid rgba(36,100,93,.10);
      box-shadow: 0 -4px 24px rgba(0,0,0,.10);
      overflow: hidden;
      transform: translateY(100%) scaleY(0.4);
      transform-origin: bottom center;
      opacity: 0;
      pointer-events: none;
      transition:
        transform 0.52s cubic-bezier(0.34,1.56,0.64,1),
        opacity   0.22s ease 0.06s;
      will-change: transform, opacity;
    }
    .sticky-player.mini-mode .player-mini {
      transform: translateY(0) scaleY(1);
      opacity: 1;
      pointer-events: auto;
    }

    /* Mini progress bar */
    .mini-bar-track { width: 100%; height: 3px; background: rgba(36,100,93,.10); flex-shrink: 0; }
    .mini-bar-fill {
      height: 100%; width: 0%;
      background: var(--primary-dark);
      border-radius: 0 2px 2px 0;
      position: relative; overflow: hidden;
    }
    .mini-bar-fill::after {
      content: '';
      position: absolute; top: 0; left: -60%; bottom: 0; width: 60%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.45), transparent);
      animation: barShimmer 2.8s ease-in-out infinite;
    }
    @keyframes barShimmer { 0%{left:-60%} 65%{left:120%} 100%{left:120%} }

    /* Mini text row */
    .mini-text-row {
      display: flex; align-items: center; justify-content: space-between;
      padding: 6px 16px 9px;
    }
    .mini-name { font-size: .65rem; color: var(--primary-dark); font-weight: 600; }
    .mini-time { font-size: .65rem; color: #9ca3af; font-variant-numeric: tabular-nums; }

    /* ‚îÄ‚îÄ FILTER ‚îÄ‚îÄ */
    .filter-wrap { margin-bottom: 20px; display: flex; flex-direction: column; align-items: center; gap: 10px; }
    .filter-chips { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; }
    .filter-chip { display: inline-flex; align-items: center; gap: 6px; background: var(--white); border: 1.5px solid transparent; border-radius: 30px; padding: 5px 12px 5px 8px; box-shadow: 0 2px 8px rgba(0,0,0,.06); font-size: .78rem; font-weight: 500; font-family: inherit; cursor: pointer; color: var(--text); transition: all 0.2s ease; }
    .filter-chip:hover { box-shadow: 0 3px 12px rgba(0,0,0,.12); transform: translateY(-1px); }
    .filter-chip.active { background: var(--primary-dark); color: #fff; border-color: var(--primary-dark); box-shadow: 0 4px 14px rgba(26,74,68,.3); }
    .filter-chip.active .filter-dot { border-color: rgba(255,255,255,.4) !important; }
    .filter-dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
    @keyframes chipPulse { 0% { box-shadow: 0 0 0 0 var(--pulse-color, rgba(0,0,0,0.4)); } 50% { box-shadow: 0 0 0 10px rgba(0,0,0,0); } 100% { box-shadow: 0 0 0 0 rgba(0,0,0,0); } }
    .filter-chip.active { animation: chipPulse 2s ease-out infinite; }

    /* Hidden rows */
    tbody tr.filtered-out { display: none; }
    .day-card-mobile.filtered-out { display: none; }

    @keyframes fadeUp { from { opacity: 0; transform: translateY(18px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

    footer { background: var(--primary-dark); text-align: center; padding: 24px 20px; color: rgba(255,255,255,.45); font-size: .8rem; letter-spacing: .05em; }
    footer strong { color: var(--gold); }

    @media (max-width: 640px) {
      header { padding: 20px 16px 18px; }
      main { padding: 24px 12px 60px; }
      .table-wrap { display: none; }
      .mobile-cards { display: block; }
      .filter-chips { flex-direction: row; flex-wrap: wrap; justify-content: flex-start; width: 100%; gap: 8px; }
      .filter-chip { justify-content: flex-start; border-radius: 30px; padding: 6px 12px 6px 8px; font-size: .8rem; flex: 0 1 auto; }
      .filter-wrap { align-items: flex-start; }
      .today-card-top { padding: 18px 20px 16px; }
      .today-card-body { padding: 14px 20px 16px; }
      .today-imam-name { font-size: 1.6rem; }
    }
  </style>
</head>
<body>

<header>
  <div class="ornament">
    <div class="orn-line l"></div><div class="orn-dot"></div>
    <div class="orn-diamond"></div><div class="orn-dot"></div>
    <div class="orn-line r"></div>
  </div>
  <h1>Tarawih Schema<br>Ramadan 2026</h1>
  <div class="header-address">
    <div class="addr-text">
      <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
      Tenstastr√•ket 16, 163 61 Sp√•nga
    </div>
    <a href="https://www.google.com/maps/search/?api=1&query=Tenstastr√•ket+16,+163+61+Sp√•nga" target="_blank">
      <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
      Hitta hit
    </a>
  </div>
</header>

<div class="wave">
  <svg viewBox="0 0 1440 56" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">
    <path d="M0,28 C400,65 1040,-9 1440,28 L1440,0 L0,0 Z" fill="#24645d"/>
  </svg>
</div>

<main>

  <!-- EID CARD -->
  <div class="eid-card" id="eid-card">
    <!-- Floating background crescents -->
    <div class="eid-crescents">
      <span class="eid-crescent" style="left:8%;top:18%;--dur:7s;--delay:0s;--rot:-12deg;--max-op:0.15;">üåô</span>
      <span class="eid-crescent" style="right:10%;top:12%;--dur:9s;--delay:1.2s;--rot:10deg;--max-op:0.12;">üåô</span>
      <span class="eid-crescent" style="left:20%;bottom:20%;--dur:8s;--delay:2.5s;--rot:5deg;--max-op:0.10;">‚ú¶</span>
      <span class="eid-crescent" style="right:18%;bottom:25%;--dur:6.5s;--delay:0.8s;--rot:-8deg;--max-op:0.13;">‚ú¶</span>
      <span class="eid-crescent" style="left:50%;top:8%;--dur:10s;--delay:3s;--rot:3deg;--max-op:0.09;">üåô</span>
    </div>

    <div class="eid-inner">
      <!-- Top ornament -->
      <div class="eid-ornament">
        <div class="eid-orn-line"></div>
        <div class="eid-orn-dot"></div>
        <div class="eid-orn-diamond"></div>
        <div class="eid-orn-dot"></div>
        <div class="eid-orn-line r"></div>
      </div>

      <!-- Arabic -->
      <div class="eid-arabic">ÿ™ŸéŸÇŸéÿ®ŸéŸëŸÑŸé ÿßŸÑŸÑŸáŸè ŸÖŸêŸÜŸéŸëÿß ŸàŸéŸÖŸêŸÜŸíŸÉŸèŸÖ</div>

      <!-- Main title -->
      <div class="eid-title">Eid Mubarak</div>

      <!-- Gold divider -->
      <div class="eid-divider">
        <div class="eid-divider-line"></div>
        <div class="eid-divider-dot"></div>
        <div class="eid-divider-line"></div>
      </div>

      <!-- Transliteration -->
      <div class="eid-subtitle">Taqabbal Allahu minna wa minkum</div>

      <!-- Closing note -->
      <div class="eid-note">
        <strong>Ramadan 1447 √§r avslutat.</strong><br>
        M√• Allah acceptera era b√∂ner, fasta och goda g√§rningar.<br>
        Vi ses n√§sta √•r, in shaa Allah.
      </div>

      <!-- Instagram -->
      <a class="eid-instagram" href="https://www.instagram.com/sverigesimamer/" target="_blank" rel="noopener">
        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg>
        @sverigesimamer
      </a>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       REDESIGNED TODAY CARD
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="today-card" id="today-card">

    <!-- Glass-gradient header -->
    <div class="today-card-top">
      <div class="today-card-header-content">
        <!-- Badge -->
        <div class="today-badge-pill">
          <div class="today-badge-pill-dot"></div>
          <span class="today-badge-pill-text">Dagens Imam</span>
        </div>
        <!-- Imam name -->
        <span class="today-imam-name" id="today-imam-name">‚Äî</span>
        <!-- Date row -->
        <div class="today-date-row">
          <span class="today-date-text" id="today-date-label">‚Äî</span>
        </div>
      </div>
    </div>

    <!-- Body -->
    <div class="today-card-body">

      <!-- Info grid: pages + surahs -->
      <div class="today-info-grid">
        <div class="today-info-cell">
          <span class="today-info-label">Sidor idag</span>
          <span class="today-info-value" id="today-pages">‚Äî</span>
        </div>
        <div class="today-info-cell">
          <span class="today-info-label">Suror</span>
          <span class="today-info-value" style="font-size:1rem; font-family:'DM Sans',sans-serif; font-weight:500;" id="today-surahs-name">‚Äî</span>
          <span class="today-info-sub" id="today-surahs-ref"></span>
        </div>
      </div>

      <!-- Hadith (last 10 nights, injected by JS) -->
      <div id="today-hadith-slot"></div>

      <!-- Countdown -->
      <div class="today-countdown-section" id="isha-countdown">
        <div class="today-countdown-inner">
          <div class="today-countdown-left">
            <span class="today-countdown-label" id="isha-label">Tid kvar till Isha</span>
            <div class="timer-wrap">
              <div class="today-timer" id="isha-timer">--:--:--</div>
              <div class="today-timer-done" id="isha-timer-done">üïå B√∂netiden √§r inne</div>
            </div>
            <span class="today-countdown-sub" id="isha-time-info"></span>
          </div>
          <button class="notif-btn" id="notif-btn" title="F√• en notis n√§r Isha-b√∂netiden b√∂rjar">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>
            <span id="notif-btn-label">Notifiera mig</span>
          </button>
        </div>
      </div>

      <!-- CTA -->
      <div class="today-card-footer">
        <button class="today-scroll-btn" onclick="scrollToToday()">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
          Se i schemat
        </button>
      </div>

    </div>
  </div>

  <!-- SECTION TITLE -->
  <div class="section-title">
    <h2>Imamernas B√∂neledning</h2>
    <div class="divider"><span></span><i></i><span></span></div>
  </div>

  <!-- FILTER -->
  <div class="filter-wrap" id="filter-wrap">
    <div class="filter-chips" id="filter-chips">
      <button class="filter-chip" data-imam="abdurrahman" onclick="toggleFilter('abdurrahman')"><span class="filter-dot" style="background:var(--abdurrahman)"></span>Abdurrahman Sudani</button>
      <button class="filter-chip" data-imam="saed" onclick="toggleFilter('saed')"><span class="filter-dot" style="background:var(--saed);border:1px solid #bbb"></span>Saed Magan</button>
      <button class="filter-chip" data-imam="noor" onclick="toggleFilter('noor')"><span class="filter-dot" style="background:var(--noor)"></span>Noor</button>
      <button class="filter-chip" data-imam="abdul" onclick="toggleFilter('abdul')"><span class="filter-dot" style="background:var(--abdul)"></span>Abdul Qadir</button>
      <button class="filter-chip" data-imam="mohammed" onclick="toggleFilter('mohammed')"><span class="filter-dot" style="background:var(--mohammed)"></span>Mohammed Haji</button>
      <button class="filter-chip" data-imam="yacquub" onclick="toggleFilter('yacquub')"><span class="filter-dot" style="background:var(--yacquub)"></span>Yacquub</button>
      <button class="filter-chip" data-imam="ibrahim" onclick="toggleFilter('ibrahim')"><span class="filter-dot" style="background:var(--ibrahim)"></span>Ibrahim Noor</button>
      <button class="filter-chip" data-imam="abdelsalam" onclick="toggleFilter('abdelsalam')"><span class="filter-dot" style="background:var(--abdelsalam)"></span>Abdelsalam Nour</button>
      <button class="filter-chip" data-imam="hatem" onclick="toggleFilter('hatem')"><span class="filter-dot" style="background:var(--hatem)"></span>Hatem</button>
    </div>
  </div>

  <!-- DESKTOP TABLE -->
  <div class="table-wrap">
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Sidor</th>
          <th>Suror</th>
          <th>Imam</th>
          <th>Datum</th>
          <th></th>
          <th></th>
          <th>Dag</th>
        </tr>
      </thead>
      <tbody id="table-body"></tbody>
    </table>
  </div>

  <!-- MOBILE CARDS -->
  <div class="mobile-cards" id="mobile-cards"></div>

</main>

<footer>
  <a href="https://www.instagram.com/sverigesimamer/" target="_blank" rel="noopener" style="display:inline-flex;align-items:center;gap:7px;color:rgba(255,255,255,.65);text-decoration:none;margin-bottom:12px;font-size:.82rem;transition:color 0.2s;" onmouseover="this.style.color='#fff'" onmouseout="this.style.color='rgba(255,255,255,.65)'">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg>
    @sverigesimamer
  </a>
  <br>
  &copy; 2026 &nbsp;<strong>Sveriges Imamer</strong>&nbsp; ‚Äî Tarawih Schema Ramadan 1447
</footer>

<script>
  const SCHEDULE = [
    {day:1,  sidor:'2‚Äì11',    imam:'abdurrahman', imamLabel:'Abdurrahman Sudani', datum:'2026-02-17', vecka:'Tisdag',   surahs:'Al-Baqarah',                                                                                                        tooltip:'2:1 ‚Äì 2:74'},
    {day:2,  sidor:'11‚Äì21',  imam:'saed',        imamLabel:'Saed Magan',         datum:'2026-02-18', vecka:'Onsdag',   surahs:'Al-Baqarah',                                                                                                        tooltip:'2:75 ‚Äì 2:141'},
    {day:3,  sidor:'22‚Äì31',  imam:'noor',        imamLabel:'Noor',               datum:'2026-02-19', vecka:'Torsdag',  surahs:'Al-Baqarah',                                                                                                        tooltip:'2:142 ‚Äì 2:202'},
    {day:4,  sidor:'32‚Äì41',  imam:'abdul',       imamLabel:'Abdul Qadir',        datum:'2026-02-20', vecka:'Fredag',   surahs:'Al-Baqarah',                                                                                                        tooltip:'2:203 ‚Äì 2:265'},
    {day:5,  sidor:'42‚Äì51',  imam:'mohammed',    imamLabel:'Mohammed Haji',      datum:'2026-02-21', vecka:'L√∂rdag',   surahs:'Al-Baqarah, Ali Imran',                                                                                             tooltip:'2:266 ‚Äì 3:14'},
    {day:6,  sidor:'51‚Äì62',  imam:'abdurrahman', imamLabel:'Abdurrahman Sudani', datum:'2026-02-22', vecka:'S√∂ndag',   surahs:'Ali Imran',                                                                                                         tooltip:'3:15 ‚Äì 3:92'},
    {day:7,  sidor:'62‚Äì72',  imam:'abdurrahman', imamLabel:'Abdurrahman Sudani', datum:'2026-02-23', vecka:'M√•ndag',   surahs:'Ali Imran',                                                                                                         tooltip:'3:93 ‚Äì 3:170'},
    {day:8,  sidor:'72‚Äì81',  imam:'saed',        imamLabel:'Saed Magan',         datum:'2026-02-24', vecka:'Tisdag',   surahs:'Ali Imran, An-Nisa',                                                                                                tooltip:'3:171 ‚Äì 4:23'},
    {day:9,  sidor:'82‚Äì92',  imam:'ibrahim',     imamLabel:'Ibrahim Noor',        datum:'2026-02-25', vecka:'Onsdag',   surahs:'An-Nisa',                                                                                                           tooltip:'4:24 ‚Äì 4:87'},
    {day:10, sidor:'92‚Äì101', imam:'saed',        imamLabel:'Saed Magan',         datum:'2026-02-26', vecka:'Torsdag',  surahs:'An-Nisa',                                                                                                           tooltip:'4:88 ‚Äì 4:147'},
    {day:11, sidor:'102‚Äì106',imam:'mohammed',    imamLabel:'Mohammed Haji',      datum:'2026-02-27', vecka:'Fredag',   surahs:'An-Nisa, Fatir',                                                                                                    tooltip:'4:148 ‚Äì 35:30'},
    {day:12, sidor:'438‚Äì449',imam:'saed',        imamLabel:'Saed Magan',         datum:'2026-02-28', vecka:'L√∂rdag',   surahs:'Fatir, Ya-Sin',                                                                                                     tooltip:'35:31 ‚Äì 36:82'},
    {day:13, sidor:'449‚Äì458',imam:'abdelsalam',  imamLabel:'Abdelsalam Nour',    datum:'2026-03-01', vecka:'S√∂ndag',   surahs:'Ya-Sin, As-Saffat, Sad',                                                                                            tooltip:'36:83 ‚Äì 38:88'},
    {day:14, sidor:'458‚Äì467',imam:'saed',        imamLabel:'Saed Magan',         datum:'2026-03-02', vecka:'M√•ndag',   surahs:'Az-Zumar',                                                                                                          tooltip:'39:1 ‚Äì 39:75'},
    {day:15, sidor:'467‚Äì476',imam:'noor',        imamLabel:'Noor',               datum:'2026-03-03', vecka:'Tisdag',   surahs:'Ghafir',                                                                                                            tooltip:'40:1 ‚Äì 40:85'},
    {day:16, sidor:'476‚Äì486',imam:'mohammed',    imamLabel:'Mohammed Haji',      datum:'2026-03-04', vecka:'Onsdag',   surahs:'Fussilat, Ash-Shura',                                                                                               tooltip:'41:1 ‚Äì 42:26'},
    {day:17, sidor:'486‚Äì495',imam:'saed',        imamLabel:'Saed Magan',         datum:'2026-03-05', vecka:'Torsdag',  surahs:'Ash-Shura, Az-Zukhruf',                                                                                             tooltip:'42:27 ‚Äì 43:89'},
    {day:18, sidor:'496‚Äì506',imam:'saed',        imamLabel:'Saed Magan',         datum:'2026-03-06', vecka:'Fredag',   surahs:'Ad-Dukhan, Al-Jathiyah, Al-Ahqaf',                                                                                  tooltip:'44:1 ‚Äì 46:35'},
    {day:19, sidor:'507‚Äì515',imam:'yacquub',     imamLabel:'Yacquub',            datum:'2026-03-07', vecka:'L√∂rdag',   surahs:'Muhammad, Al-Fath',                                                                                                 tooltip:'47:1 ‚Äì 48:29'},
    {day:20, sidor:'515‚Äì523',imam:'yacquub',     imamLabel:'Yacquub',            datum:'2026-03-08', vecka:'S√∂ndag',   surahs:'Al-Hujurat, Qaf, Adh-Dhariyat',                                                                                     tooltip:'49:1 ‚Äì 51:60', moonText:'Profeten Ô∑∫ sade: "S√∂k Laylat al-Qadr i de udda n√§tterna under de sista tio dagarna av Ramadan." (Sahih Bukhari)'},
    {day:21, sidor:'523‚Äì531',imam:'noor',        imamLabel:'Noor',               datum:'2026-03-09', vecka:'M√•ndag',   surahs:'At-Tur, An-Najm, Al-Qamar',                                                                                         tooltip:'52:1 ‚Äì 54:55'},
    {day:22, sidor:'531‚Äì539',imam:'mohammed',    imamLabel:'Mohammed Haji',      datum:'2026-03-10', vecka:'Tisdag',   surahs:'Ar-Rahman, Al-Waqiah, Al-Hadid',                                                                                    tooltip:'55:1 ‚Äì 57:15', moonText:'Profeten Ô∑∫ sade: "S√∂k Laylat al-Qadr i de udda n√§tterna under de sista tio dagarna av Ramadan." (Sahih Bukhari)'},
    {day:23, sidor:'539‚Äì548',imam:'abdurrahman', imamLabel:'Abdurrahman Sudani', datum:'2026-03-11', vecka:'Onsdag',   surahs:'Al-Hadid, Al-Mujadilah, Al-Hashr',                                                                                  tooltip:'57:16 ‚Äì 59:24'},
    {day:24, sidor:'549‚Äì557',imam:'abdul',       imamLabel:'Abdul Qadir',        datum:'2026-03-12', vecka:'Torsdag',  surahs:'Al-Mumtahanah, As-Saf, Al-Jumuah, Al-Munafiqun, At-Taghabun',                                                       tooltip:'60:1 ‚Äì 64:18', moonText:'Profeten Ô∑∫ sade: "S√∂k efter den (Maktens natt) p√• den tjugonionde, tjugosjunde och tjugofemte natten." Sahih al-Bukhari 2023'},
    {day:25, sidor:'558‚Äì566',imam:'hatem',       imamLabel:'Hatem',              datum:'2026-03-13', vecka:'Fredag',   surahs:'At-Talaq, At-Tahrim, Al-Mulk, Al-Qalam',                                                                            tooltip:'65:1 ‚Äì 68:52'},
    {day:26, sidor:'566‚Äì574',imam:'abdurrahman', imamLabel:'Abdurrahman Sudani', datum:'2026-03-14', vecka:'L√∂rdag',   surahs:'Al-Haqqah, Al-Maarij, Nuh, Al-Jinn, Al-Muzzammil',                                                                  tooltip:'69:1 ‚Äì 73:20', moonText:'Profeten Ô∑∫ sade: "Den som st√•r upp i nattb√∂n under Laylatul-Qadr med tro och i hopp om bel√∂ning f√•r sina tidigare synder f√∂rl√•tna." (al-Bukhari och Muslim)'},
    {day:27, sidor:'575‚Äì583',imam:'noor',        imamLabel:'Noor',               datum:'2026-03-15', vecka:'S√∂ndag',   surahs:'Al-Muddaththir, Al-Qiyamah, Al-Insan, Al-Mursalat, An-Naba',                                                         tooltip:'74:1 ‚Äì 78:40'},
    {day:28, sidor:'583‚Äì591',imam:'mohammed',    imamLabel:'Mohammed Haji',      datum:'2026-03-16', vecka:'M√•ndag',   surahs:'An-Naziat, Abasa, At-Takwir, Al-Infitar, Al-Mutaffifin, Al-Inshiqaq, Al-Buruj, At-Tariq, Al-Ala',                    tooltip:'79:1 ‚Äì 87:19', moonText:'Profeten Ô∑∫ sade: "S√∂k efter den (Maktens natt) p√• den tjugonionde, tjugosjunde och tjugofemte natten." Sahih al-Bukhari 2023'},
    {day:29, sidor:'592‚Äì604',imam:'yacquub',     imamLabel:'Yacquub',            datum:'2026-03-17', vecka:'Tisdag',   surahs:'Al-Ghashiyah, Al-Fajr, Al-Balad, Ash-Shams, Al-Layl, Ad-Duha, Ash-Sharh, At-Tin, Al-Alaq, Al-Qadr, Al-Bayyinah, Az-Zalzalah, Al-Adiyat, Al-Qariah, At-Takathur, Al-Asr, Al-Humazah, Al-Fil, Quraysh, Al-Maun, Al-Kawthar, Al-Kafirun, An-Nasr, Al-Masad, Al-Ikhlas, Al-Falaq, An-Nas', tooltip:'88:1 ‚Äì 114:6'},
    {day:30, sidor:'2‚Äì11',   imam:'noor',        imamLabel:'Noor',               datum:'2026-03-18', vecka:'Onsdag',   surahs:'Al-Baqarah',                                                                                                        tooltip:'2:1 ‚Äì 2:74'},
  ];

  const DAYS   = ['S√∂ndag','M√•ndag','Tisdag','Onsdag','Torsdag','Fredag','L√∂rdag'];
  const MONTHS = ['januari','februari','mars','april','maj','juni','juli','augusti','september','oktober','november','december'];
  const _now = new Date();
  const _p2 = n => String(n).padStart(2,'0');
  const today = _now.getFullYear() + '-' + _p2(_now.getMonth()+1) + '-' + _p2(_now.getDate());
  const isAfterRamadan = today > '2026-03-18';

  function scrollToToday() {
    const isMobile = window.innerWidth <= 640;
    const el = document.getElementById(isMobile ? 'today-row-mobile' : 'today-row-desktop');
    if (!el) return;
    const y = el.getBoundingClientRect().top + window.scrollY - 80;
    window.scrollTo({ top: y, behavior: 'smooth' });
  }

  document.addEventListener('click', (e) => {
    if (!e.target.closest('.surah-cell') && !e.target.closest('.dcm-surahs')) {
      document.querySelectorAll('.tooltip-box.visible, .dcm-tooltip.visible').forEach(el => el.classList.remove('visible'));
    }
    if (!e.target.closest('.moon-wrap') && !e.target.closest('.today-moon-wrap')) {
      document.querySelectorAll('.moon-wrap.active, .today-moon-wrap.active').forEach(el => el.classList.remove('active'));
    }
  });

  document.addEventListener('click', (e) => {
    const moonWrap = e.target.closest('.moon-wrap, .today-moon-wrap');
    if (moonWrap) {
      const isActive = moonWrap.classList.contains('active');
      document.querySelectorAll('.moon-wrap.active, .today-moon-wrap.active').forEach(el => el.classList.remove('active'));
      if (!isActive) moonWrap.classList.add('active');
      e.stopPropagation();
    }
  });

  // Build desktop table
  const tbody = document.getElementById('table-body');
  SCHEDULE.forEach(row => {
    const isToday = row.datum === today;
    const tr = document.createElement('tr');
    if (isToday) { tr.classList.add('today'); tr.id = 'today-row-desktop'; }
    const veckaClass = row.vecka === 'Fredag' ? 'fredag' : row.vecka === 'L√∂rdag' ? 'lordag' : row.vecka === 'S√∂ndag' ? 'sondag' : '';
    const badge = isToday ? '<span class="today-badge">Idag</span>' : '';
    const isLastTen = row.day >= 21;
    if (isLastTen) tr.classList.add('last-ten');
    const isOddNight = row.day % 2 !== 0;
    const moonClass = isOddNight ? 'moon-icon moon-odd' : 'moon-icon';
    const defaultMoonText = 'Profeten Ô∑∫ sade: "Den som st√•r upp i nattb√∂n under Laylatul-Qadr med tro och i hopp om bel√∂ning f√•r sina tidigare synder f√∂rl√•tna." [al-Bukhari och Muslim]';
    const thisMoonText = row.moonText || defaultMoonText;
    const moonIcon = isLastTen ? `<span class="moon-wrap"><span class="${moonClass}"><svg width="12" height="12" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg></span><span class="moon-tooltip">${thisMoonText}</span></span>` : '';
    tr.innerHTML = `
      <td class="td-dag">${row.day}</td>
      <td class="td-sidor">${row.sidor}</td>
      <td class="td-surah surah-cell" tabindex="0">
        <div class="surah-names">${row.surahs}</div>
        <div class="tooltip-box">üìñ ${row.tooltip}</div>
      </td>
      <td><span class="imam-chip imam-${row.imam}"><span class="dot"></span>${row.imamLabel}</span></td>
      <td class="td-datum ${isToday ? 'today-date' : ''}">${row.datum}${badge}</td>
      <td class="td-audio" id="audio-desktop-${row.datum}"></td>
      <td class="td-moon">${moonIcon}</td>
      <td class="td-veckodag ${veckaClass}">${row.vecka}</td>
    `;
    const cell = tr.querySelector('.surah-cell');
    cell.addEventListener('click', (e) => {
      const tip = cell.querySelector('.tooltip-box');
      const isVisible = tip.classList.contains('visible');
      document.querySelectorAll('.tooltip-box.visible').forEach(el => el.classList.remove('visible'));
      if (!isVisible) tip.classList.add('visible');
      e.stopPropagation();
    });
    tbody.appendChild(tr);
  });

  // Build mobile cards
  const container = document.getElementById('mobile-cards');
  SCHEDULE.forEach(row => {
    const isToday = row.datum === today;
    const card = document.createElement('div');
    const isLastTenM = row.day >= 21;
    card.className = 'day-card-mobile' + (isToday ? ' today' : '') + (isLastTenM ? ' last-ten' : '');
    if (isToday) card.id = 'today-row-mobile';
    const veckaClass = row.vecka === 'Fredag' ? 'fredag' : row.vecka === 'L√∂rdag' ? 'lordag' : row.vecka === 'S√∂ndag' ? 'sondag' : '';
    const badge = isToday ? '<span class="today-badge">Idag</span>' : '';
    const isOddNightM = row.day % 2 !== 0;
    const moonClassM = isOddNightM ? 'moon-icon moon-odd' : 'moon-icon';
    const defaultMoonTextM = 'Profeten Ô∑∫ sade: "Den som st√•r upp i nattb√∂n under Laylatul-Qadr med tro och i hopp om bel√∂ning f√•r sina tidigare synder f√∂rl√•tna." [al-Bukhari och Muslim]';
    const thisMoonTextM = row.moonText || defaultMoonTextM;
    const moonSpan = isLastTenM ? `<span class='moon-wrap' style='margin-left:5px;'><span class='${moonClassM}'><svg width='11' height='11' viewBox='0 0 24 24' fill='white'><path d='M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z'/></svg></span><span class='moon-tooltip' style='right:auto;left:0;'>${thisMoonTextM}</span></span>` : '';
    card.innerHTML = `
      <div class="dcm-top">
        <div class="dcm-dag ${isToday ? 'today-day' : ''}">${row.day}</div>
        <div class="dcm-body">
          <div class="dcm-imam"><span class="imam-chip imam-${row.imam}"><span class="dot"></span>${row.imamLabel}</span></div>
          <div class="dcm-meta">
            <span class="dcm-date">${row.datum}${badge}</span>
            ${moonSpan}
            <span class="dcm-day-label ${veckaClass}">${row.vecka}</span>
            <span class="dcm-pages">s. ${row.sidor}</span>
          </div>
        </div>
        <div class="dcm-audio-right" id="audio-mobile-${row.datum}"></div>
      </div>
      <div class="dcm-surahs">
        <span class="dcm-surahs-label">Suror ‚Äî tryck f√∂r detaljer</span>
        ${row.surahs}
        <div class="dcm-tooltip">üìñ ${row.tooltip}</div>
      </div>
    `;
    const surahBox = card.querySelector('.dcm-surahs');
    surahBox.addEventListener('click', (e) => {
      const tip = surahBox.querySelector('.dcm-tooltip');
      const isVisible = tip.classList.contains('visible');
      document.querySelectorAll('.dcm-tooltip.visible').forEach(el => el.classList.remove('visible'));
      if (!isVisible) {
        tip.classList.add('visible');
        setTimeout(() => { surahBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' }); }, 220);
      }
      e.stopPropagation();
    });
    container.appendChild(card);
  });

  // Populate today card
  if (isAfterRamadan) {
    document.getElementById('eid-card').style.display = 'block';
  }

  const todayData = SCHEDULE.find(r => r.datum === today);
  if (todayData) {
    const d = new Date(today);
    document.getElementById('today-imam-name').textContent = todayData.imamLabel;
    const dateLabel = DAYS[d.getDay()] + ' ' + d.getDate() + ' ' + MONTHS[d.getMonth()];

    if (todayData.day >= 21) {
      const dateEl = document.getElementById('today-date-label');
      dateEl.textContent = dateLabel;
      const isTodayOdd = todayData.day % 2 !== 0;
      const todayMoonText = todayData.moonText || 'Profeten Ô∑∫ sade: "Den som st√•r upp i nattb√∂n under Laylatul-Qadr med tro och i hopp om bel√∂ning f√•r sina tidigare synder f√∂rl√•tna." [al-Bukhari och Muslim]';
      const moonWrap = document.createElement('span');
      moonWrap.className = 'today-moon-wrap';
      moonWrap.style.marginLeft = '8px';
      const moonIconStyle = isTodayOdd ? 'background:linear-gradient(135deg,#9a6f0a,#c9a84c);box-shadow:0 0 7px rgba(201,168,76,0.55);' : '';
      moonWrap.innerHTML = `<span class="today-moon-icon" style="${moonIconStyle}"><svg width="12" height="12" viewBox="0 0 24 24" fill="white"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg></span><span class="today-moon-tooltip">${todayMoonText}</span>`;
      dateEl.parentNode.appendChild(moonWrap);
    } else {
      document.getElementById('today-date-label').textContent = dateLabel;
    }

    document.getElementById('today-pages').textContent = 'Sidor ' + todayData.sidor;
    document.getElementById('today-surahs-name').textContent = todayData.surahs;
    document.getElementById('today-surahs-ref').textContent = todayData.tooltip;

    // Hadith for last 10 nights
    if (todayData.day >= 21) {
      const hadithSlot = document.getElementById('today-hadith-slot');
      const hadithText = todayData.moonText || 'Profeten Ô∑∫ sade: "Den som st√•r upp i nattb√∂n under Laylatul-Qadr med tro och i hopp om bel√∂ning f√•r sina tidigare synder f√∂rl√•tna." [al-Bukhari och Muslim]';
      hadithSlot.innerHTML = `
        <div class="today-hadith">
          <span class="moon-small"><svg width="10" height="10" viewBox="0 0 24 24" fill="white"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg></span>
          <span>${hadithText}</span>
        </div>
      `;
    }

    const avatarPulseColors = {
      abdurrahman:'rgba(232,99,10,0.55)', saed:'rgba(212,168,0,0.55)', noor:'rgba(41,128,185,0.55)',
      abdul:'rgba(100,100,100,0.55)', mohammed:'rgba(33,145,80,0.55)', yacquub:'rgba(125,58,172,0.55)',
      ibrahim:'rgba(26,107,138,0.55)', abdelsalam:'rgba(123,63,0,0.55)', hatem:'rgba(45,106,79,0.55)',
    };
    const todayCard = document.getElementById('today-card');
    todayCard.style.display = 'block';
    todayCard.style.setProperty('--card-pulse', avatarPulseColors[todayData.imam] || 'rgba(255,255,255,0.3)');
    todayCard.classList.add('pulsing');

    // Auto-scroll only if user has NOT already scrolled
    let _hasScrolled = false;
    const _scrollGuard = () => { _hasScrolled = true; };
    window.addEventListener('scroll', _scrollGuard, { passive: true, once: true });

    setTimeout(() => {
      window.removeEventListener('scroll', _scrollGuard);
      if (_hasScrolled) return; // bail ‚Äî user already scrolled
      const card = document.getElementById('today-card');
      const targetY = card.getBoundingClientRect().top + window.scrollY - 20;
      const startY = window.scrollY;
      const dist = targetY - startY;
      if (Math.abs(dist) < 10) return; // already in view, skip
      const duration = 1100;
      let start = null;
      function easeInOutCubic(t) { return t < 0.5 ? 4*t*t*t : 1 - Math.pow(-2*t+2,3)/2; }
      function step(ts) {
        if (!start) start = ts;
        const elapsed = ts - start;
        const progress = Math.min(elapsed / duration, 1);
        window.scrollTo(0, startY + dist * easeInOutCubic(progress));
        if (progress < 1) requestAnimationFrame(step);
      }
      requestAnimationFrame(step);
    }, 3000);
  }

  // ‚îÄ‚îÄ AUDIO ‚îÄ‚îÄ
  const audioState = {};
  let _stickyScrollTimer = null;
  let _activeDatum = null;

  const PLAY_ICON  = `<svg width="13" height="13" viewBox="0 0 24 24" fill="currentColor"><polygon points="7,3 21,12 7,21" transform="translate(1,0)"/></svg>`;
  const PAUSE_ICON = `<svg width="13" height="13" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="3" width="4" height="18"/><rect x="14" y="3" width="4" height="18"/></svg>`;
  const SPIN_ICON  = `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" style="animation:spin 0.9s linear infinite"><path d="M12 2a10 10 0 1 0 10 10"/></svg>`;

  function updateStickyPlayBtn(isPlaying) {
    const btn = document.getElementById('sticky-play-btn');
    if (!btn) return;
    if (isPlaying) { btn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="3" width="4" height="18"/><rect x="14" y="3" width="4" height="18"/></svg>'; btn.classList.add('red'); }
    else { btn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><polygon points="7,3 21,12 7,21" transform="translate(1,0)"/></svg>'; btn.classList.remove('red'); }
  }

  function setBtns(datum, icon, isPlaying) {
    document.querySelectorAll('.play-btn[data-datum="' + datum + '"]').forEach(b => {
      b.innerHTML = icon;
      isPlaying ? b.classList.add('playing') : b.classList.remove('playing');
    });
    if (datum === _activeDatum) updateStickyPlayBtn(isPlaying);
  }

  function createPlayBtn(datum) {
    const btn = document.createElement('button');
    btn.className = 'play-btn';
    btn.setAttribute('data-datum', datum);
    btn.title = 'Spela upp recitation';
    btn.innerHTML = PLAY_ICON;
    btn.addEventListener('click', e => { e.stopPropagation(); toggleAudio(datum); });
    return btn;
  }

  function fmtTime(s) {
    if (!isFinite(s)) return '0:00';
    const m = Math.floor(s / 60);
    const sec = Math.floor(s % 60);
    return `${m}:${sec.toString().padStart(2,'0')}`;
  }

  function updatePlayerUI(datum, currentTime, duration) {
    const pct = duration > 0 ? (currentTime / duration) * 100 : 0;
    const cur   = document.getElementById('cur-desktop-'   + datum);
    const dur   = document.getElementById('dur-desktop-'   + datum);
    const fill  = document.getElementById('fill-desktop-'  + datum);
    const thumb = document.getElementById('thumb-desktop-' + datum);
    if (cur)   cur.textContent   = fmtTime(currentTime);
    if (dur)   dur.textContent   = fmtTime(duration);
    if (fill)  fill.style.width  = pct + '%';
    if (thumb) thumb.style.left  = pct + '%';
    const sCur   = document.getElementById('sticky-cur');
    const sDur   = document.getElementById('sticky-dur');
    const sFill  = document.getElementById('sticky-fill');
    const sThumb = document.getElementById('sticky-thumb');
    const mFill  = document.getElementById('mini-fill');
    if (sCur)   sCur.textContent   = fmtTime(currentTime);
    if (sDur)   sDur.textContent   = fmtTime(duration);
    if (sFill)  sFill.style.width  = pct + '%';
    if (sThumb) sThumb.style.left  = pct + '%';
    if (mFill)  mFill.style.width  = pct + '%';
    // Update mini text row time
    const mTime = document.getElementById('mini-time-display');
    if (mTime) mTime.textContent = fmtTime(currentTime) + ' / ' + fmtTime(duration);
  }

  function showSticky() {
    if (!_activeDatum) return;
    const p = document.getElementById('sticky-player');
    p.classList.add('visible');
    p.classList.remove('mini-mode');
  }
  function hideSticky() {
    const p = document.getElementById('sticky-player');
    p.classList.remove('visible');
    p.classList.remove('mini-mode');
  }
  function miniSticky() {
    if (!_activeDatum) return;
    const p = document.getElementById('sticky-player');
    p.classList.add('visible');
    p.classList.add('mini-mode');
  }

  window.addEventListener('scroll', () => {
    if (!_activeDatum) return;
    miniSticky();
    clearTimeout(_stickyScrollTimer);
    _stickyScrollTimer = setTimeout(showSticky, 600);
  }, { passive: true });

  function navigateTo(datum) {
    if (_activeDatum && audioState[_activeDatum]) { audioState[_activeDatum].pause(); setBtns(_activeDatum, PLAY_ICON, false); closePlayer(_activeDatum); }
    toggleAudio(datum);
  }

  document.addEventListener('DOMContentLoaded', function() {
    const seekEl = document.getElementById('sticky-seek');
    if (seekEl) seekEl.addEventListener('click', e => {
      if (!_activeDatum || !audioState[_activeDatum]) return;
      const audio = audioState[_activeDatum];
      if (!audio.duration) return;
      const rect = e.currentTarget.getBoundingClientRect();
      const pct = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
      audio.currentTime = pct * audio.duration;
      updatePlayerUI(_activeDatum, audio.currentTime, audio.duration);
      e.stopPropagation();
    });
    const playBtn = document.getElementById('sticky-play-btn');
    if (playBtn) playBtn.addEventListener('click', e => { if (!_activeDatum) return; toggleAudio(_activeDatum); e.stopPropagation(); });
    const prevBtn = document.getElementById('sticky-prev');
    if (prevBtn) prevBtn.addEventListener('click', e => {
      if (!_activeDatum) return;
      const idx = SCHEDULE.findIndex(r => r.datum === _activeDatum);
      if (idx > 0 && audioUrls[SCHEDULE[idx-1].datum]) navigateTo(SCHEDULE[idx-1].datum);
      e.stopPropagation();
    });
    const nextBtn = document.getElementById('sticky-next');
    if (nextBtn) nextBtn.addEventListener('click', e => {
      if (!_activeDatum) return;
      const idx = SCHEDULE.findIndex(r => r.datum === _activeDatum);
      if (idx < SCHEDULE.length-1 && audioUrls[SCHEDULE[idx+1].datum]) navigateTo(SCHEDULE[idx+1].datum);
      e.stopPropagation();
    });
  });

  function updateStickyMarquee(row) {
    const wrap  = document.getElementById('sticky-marquee-wrap');
    const inner = document.getElementById('sticky-marquee-inner');
    const text1 = document.getElementById('sticky-marquee-text');
    const text2 = document.getElementById('sticky-marquee-text2');
    if (!wrap || !inner || !text1 || !text2) return;
    const txt = row.surahs + '  ¬∑  ' + row.tooltip;
    text1.textContent = txt; text2.textContent = txt;
    text2.style.display = 'none';
    inner.classList.remove('scrolling'); inner.style.removeProperty('--marquee-dur'); wrap.classList.remove('fading');
    const ruler = document.createElement('span');
    ruler.style.cssText = 'position:fixed;top:-9999px;left:-9999px;white-space:nowrap;font-size:.68rem;visibility:hidden;pointer-events:none;';
    ruler.textContent = txt; document.body.appendChild(ruler);
    const playerEl = document.getElementById('sticky-player');
    const playerW = playerEl ? playerEl.getBoundingClientRect().width : window.innerWidth;
    const imamEl  = document.getElementById('sticky-imam-label');
    const dayEl   = document.getElementById('sticky-day-label');
    const timesEl = document.querySelector('.sticky-times');
    const imamW   = imamEl  ? imamEl.getBoundingClientRect().width  : 80;
    const dayW    = dayEl   ? dayEl.getBoundingClientRect().width   : 80;
    const timesW  = timesEl ? timesEl.getBoundingClientRect().width : 80;
    const gaps    = 8 * 3 + 32;
    const availW  = Math.max(60, playerW - imamW - dayW - timesW - gaps);
    const textW = ruler.getBoundingClientRect().width;
    document.body.removeChild(ruler);
    if (textW > availW) {
      text2.style.display = '';
      wrap.classList.add('fading');
      const totalW = textW + 48;
      const dur = Math.max(8, Math.round(totalW / 65));
      inner.style.setProperty('--marquee-dur', dur + 's');
      inner.classList.add('scrolling');
    }
  }

  function updateStickyControls() {
    if (!_activeDatum) return;
    const idx = SCHEDULE.findIndex(r => r.datum === _activeDatum);
    const prevBtn = document.getElementById('sticky-prev');
    const nextBtn = document.getElementById('sticky-next');
    const row = SCHEDULE[idx];
    if (prevBtn) prevBtn.disabled = idx <= 0 || !audioUrls[SCHEDULE[idx-1]?.datum];
    if (nextBtn) nextBtn.disabled = idx >= SCHEDULE.length-1 || !audioUrls[SCHEDULE[idx+1]?.datum];
    const imamEl  = document.getElementById('sticky-imam-label');
    const dayEl   = document.getElementById('sticky-day-label');
    const miniName = document.getElementById('mini-name-display');
    if (imamEl  && row) imamEl.textContent  = row.imamLabel;
    if (dayEl   && row) dayEl.textContent   = 'Natt ' + row.day + ' ¬∑ ' + row.vecka;
    if (miniName && row) miniName.textContent = row.imamLabel + ' ¬∑ Natt ' + row.day;
    if (row) updateStickyMarquee(row);
  }

  function openPlayer(datum) { _activeDatum = datum; updateStickyControls(); updateStickyPlayBtn(true); setTimeout(showSticky, 200); }
  function closePlayer(datum) { _activeDatum = null; hideSticky(); updateStickyPlayBtn(false); }

  function toggleAudio(datum) {
    Object.keys(audioState).forEach(d => {
      if (d !== datum && audioState[d] && !audioState[d].paused) { audioState[d].pause(); closePlayer(d); setBtns(d, PLAY_ICON, false); }
    });
    if (!audioState[datum]) {
      const a = new Audio();
      a.src = audioUrls[datum];
      a.addEventListener('waiting',  () => setBtns(datum, SPIN_ICON, true));
      a.addEventListener('playing',  () => { setBtns(datum, PAUSE_ICON, true); openPlayer(datum); });
      a.addEventListener('timeupdate', () => updatePlayerUI(datum, a.currentTime, a.duration));
      a.addEventListener('loadedmetadata', () => updatePlayerUI(datum, a.currentTime, a.duration));
      a.addEventListener('ended', () => { closePlayer(datum); setBtns(datum, PLAY_ICON, false); updatePlayerUI(datum, 0, a.duration); });
      audioState[datum] = a;
    }
    const audio = audioState[datum];
    if (audio.paused) {
      setBtns(datum, SPIN_ICON, true);
      audio.play().then(() => {}).catch(err => { console.warn('Play failed:', err); setBtns(datum, PLAY_ICON, false); });
    } else {
      audio.pause();
      setBtns(datum, PLAY_ICON, false);
      updateStickyPlayBtn(false);
    }
  }

  function injectPlayButtons(datum) {
    ['audio-desktop-' + datum, 'audio-mobile-' + datum].forEach(id => {
      const cell = document.getElementById(id);
      if (cell && !cell.querySelector('.play-btn')) cell.appendChild(createPlayBtn(datum));
    });
  }

  const basePath = window.location.pathname.split('/').slice(0, -1).join('/');
  const audioUrls = {};
  SCHEDULE.forEach(row => {
    const url = basePath + '/' + row.datum + '.mp3';
    audioUrls[row.datum] = url;
    fetch(url, { method: 'HEAD' })
      .then(res => { if (res.ok || res.status === 206) injectPlayButtons(row.datum); })
      .catch(() => { fetch(url).then(res => { if (res.ok) injectPlayButtons(row.datum); }).catch(() => {}); });
  });

  // ‚îÄ‚îÄ ISHA COUNTDOWN ‚îÄ‚îÄ
  const ISHA_TIMES = {
    '2026-02-17':'18:56','2026-02-18':'18:58','2026-02-19':'19:00',
    '2026-02-20':'19:03','2026-02-21':'19:05','2026-02-22':'19:07',
    '2026-02-23':'19:10','2026-02-24':'19:12','2026-02-25':'19:14',
    '2026-02-26':'19:17','2026-02-27':'19:19','2026-02-28':'19:22',
    '2026-03-01':'19:24','2026-03-02':'19:27','2026-03-03':'19:29',
    '2026-03-04':'19:32','2026-03-05':'19:34','2026-03-06':'19:37',
    '2026-03-07':'19:39','2026-03-08':'19:42','2026-03-09':'19:45',
    '2026-03-10':'19:47','2026-03-11':'19:50','2026-03-12':'19:53',
    '2026-03-13':'19:55','2026-03-14':'19:58','2026-03-15':'20:01',
    '2026-03-16':'20:04','2026-03-17':'20:07','2026-03-18':'20:09',
  };

  function padZ(n) { return String(n).padStart(2,'0'); }
  function getDateKey(d) { const y=d.getFullYear(),m=padZ(d.getMonth()+1),day=padZ(d.getDate()); return y+'-'+m+'-'+day; }

  function startIshaCountdown() {
    const countdownEl  = document.getElementById('isha-countdown');
    const timerEl      = document.getElementById('isha-timer');
    const timerDoneEl  = document.getElementById('isha-timer-done');
    const infoEl       = document.getElementById('isha-time-info');
    const labelEl      = document.getElementById('isha-label');
    const notifBtn     = document.getElementById('notif-btn');
    const notifLabel   = document.getElementById('notif-btn-label');
    if (!countdownEl) return;
    countdownEl.style.display = 'block';

    let _hasTriggeredDone = false;

    // ‚îÄ‚îÄ Notification permission ‚îÄ‚îÄ
    function updateNotifBtn() {
      if (!('Notification' in window)) { notifBtn.style.display = 'none'; return; }
      if (Notification.permission === 'granted') {
        notifBtn.classList.add('granted');
        notifLabel.textContent = 'Notis aktiv';
        notifBtn.querySelector('svg').style.stroke = '#1d7a4e';
      } else if (Notification.permission === 'denied') {
        notifBtn.classList.add('denied');
        notifLabel.textContent = 'Notis blockerad';
      }
    }
    updateNotifBtn();

    notifBtn.addEventListener('click', async () => {
      if (!('Notification' in window)) return;
      if (Notification.permission === 'default') {
        const result = await Notification.requestPermission();
        updateNotifBtn();
      }
    });

    function fireIshaNotification(ishaStr) {
      if (!('Notification' in window) || Notification.permission !== 'granted') return;
      new Notification('üïå Isha-b√∂nen √§r inne', {
        body: 'B√∂netiden har b√∂rjat ‚Äî kl. ' + ishaStr,
        icon: '/favicon.ico',
        badge: '/favicon.ico',
        tag: 'isha-prayer',          // prevents duplicate stacking
        renotify: false,
        silent: false,
      });
    }

    // ‚îÄ‚îÄ Crossfade + glow trigger (runs once) ‚îÄ‚îÄ
    function triggerDoneAnimation(ishaStr) {
      if (_hasTriggeredDone) return;
      _hasTriggeredDone = true;

      // 1. Fade out the digital timer
      timerEl.classList.add('fading-out');

      // 2. Fade in the done text
      timerDoneEl.classList.add('fading-in');

      // 3. Tint the box green
      countdownEl.classList.add('isha-done');

      // 4. Glow pulse (3 slow pulses)
      countdownEl.classList.add('isha-pulsing');
      countdownEl.addEventListener('animationend', () => {
        countdownEl.classList.remove('isha-pulsing');
      }, { once: true });

      // 5. Browser notification
      fireIshaNotification(ishaStr);
    }

    function tick() {
      const now = new Date();
      const todayKey = getDateKey(now);
      const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();
      const ishaStr = ISHA_TIMES[todayKey];

      if (!ishaStr) {
        timerEl.textContent = '--:--:--';
        labelEl.textContent = 'Tid kvar till Isha';
        infoEl.textContent  = '';
        return;
      }

      const [ishaH, ishaM] = ishaStr.split(':').map(Number);
      const ishaSec = ishaH * 3600 + ishaM * 60;

      if (nowSec >= ishaSec) {
        // Trigger animation + notification once
        triggerDoneAnimation(ishaStr);
        // Keep updating the sub-label
        labelEl.textContent = 'Isha';
        infoEl.textContent  = 'Isha-b√∂nen √§r inne sedan kl. ' + ishaStr;
      } else {
        // Counting down
        labelEl.textContent = 'Tid kvar till Isha';
        infoEl.textContent  = 'Isha-b√∂nen b√∂rjar kl. ' + ishaStr;
        const diff = ishaSec - nowSec;
        const h = Math.floor(diff / 3600);
        const m = Math.floor((diff % 3600) / 60);
        const s = diff % 60;
        timerEl.textContent = padZ(h) + ':' + padZ(m) + ':' + padZ(s);
      }
    }

    tick();
    setInterval(tick, 1000);
  }
  startIshaCountdown();

  // ‚îÄ‚îÄ FILTER ‚îÄ‚îÄ
  let activeFilter = null;
  function toggleFilter(imam) {
    activeFilter = (activeFilter === imam) ? null : imam;
    applyFilter();
    if (activeFilter) {
      setTimeout(() => {
        const target = window.innerWidth <= 640 ? document.getElementById('mobile-cards') : document.querySelector('.table-wrap');
        if (target) { const y = target.getBoundingClientRect().top + window.scrollY - 90; window.scrollTo({ top: y, behavior: 'smooth' }); }
      }, 80);
    }
  }

  function applyFilter() {
    document.body.style.width = document.body.offsetWidth + 'px';
    document.body.style.overflowY = 'hidden';
    const imamColors = { abdurrahman:'rgba(232,99,10,0.5)', saed:'rgba(212,168,0,0.5)', noor:'rgba(41,128,185,0.5)', abdul:'rgba(44,44,44,0.5)', mohammed:'rgba(33,145,80,0.5)', yacquub:'rgba(125,58,172,0.5)', ibrahim:'rgba(26,107,138,0.5)', abdelsalam:'rgba(123,63,0,0.5)', hatem:'rgba(45,106,79,0.5)' };
    document.querySelectorAll('.filter-chip').forEach(btn => {
      const isActive = btn.dataset.imam === activeFilter;
      btn.classList.toggle('active', isActive);
      if (isActive) btn.style.setProperty('--pulse-color', imamColors[btn.dataset.imam] || 'rgba(0,0,0,0.3)');
      else btn.style.removeProperty('--pulse-color');
    });
    document.querySelectorAll('#table-body tr').forEach(tr => {
      const chip = tr.querySelector('.imam-chip');
      const show = !activeFilter || (chip && chip.classList.contains('imam-' + activeFilter));
      tr.classList.toggle('filtered-out', !show);
    });
    document.querySelectorAll('#mobile-cards .day-card-mobile').forEach(card => {
      const chip = card.querySelector('.imam-chip');
      const show = !activeFilter || (chip && chip.classList.contains('imam-' + activeFilter));
      card.classList.toggle('filtered-out', !show);
    });
    const visibleRows  = [...document.querySelectorAll('#table-body tr:not(.filtered-out)')];
    const visibleCards = [...document.querySelectorAll('#mobile-cards .day-card-mobile:not(.filtered-out)')];
    const lastDelay = Math.max(
      visibleRows.length  ? (visibleRows.length  - 1) * 45 + 320 : 0,
      visibleCards.length ? (visibleCards.length - 1) * 55 + 320 : 0
    );
    visibleRows.forEach((tr, i) => {
      tr.style.opacity='0'; tr.style.transform='translateY(8px)'; tr.style.transition='opacity 0.3s ease,transform 0.3s ease';
      setTimeout(() => { tr.style.opacity='1'; tr.style.transform='translateY(0)'; setTimeout(() => { tr.style.transition='background .15s'; tr.style.opacity=''; tr.style.transform=''; }, 320); }, i*45);
    });
    visibleCards.forEach((card, i) => {
      card.style.opacity='0'; card.style.transform='translateY(10px)'; card.style.transition='opacity 0.3s ease,transform 0.3s ease';
      setTimeout(() => { card.style.opacity='1'; card.style.transform='translateY(0)'; setTimeout(() => { card.style.transition=''; card.style.opacity=''; card.style.transform=''; }, 320); }, i*55);
    });
    setTimeout(() => { document.body.style.width=''; document.body.style.overflowY=''; }, lastDelay + 50);
  }
</script>

<!-- STICKY BOTTOM PLAYER -->
<div class="sticky-player" id="sticky-player">

  <!-- ‚ë† Full player ‚Äî crushes down when scrolling -->
  <div class="player-full">
    <div class="sticky-top-row">
      <span class="sticky-day-badge" id="sticky-imam-label">‚Äì</span>
      <span class="sticky-day-sub" id="sticky-day-label"></span>
      <div class="sticky-marquee-wrap" id="sticky-marquee-wrap">
        <div class="sticky-marquee-inner" id="sticky-marquee-inner">
          <span class="sticky-marquee-text" id="sticky-marquee-text"></span>
          <span class="sticky-marquee-text" id="sticky-marquee-text2" aria-hidden="true"></span>
        </div>
      </div>
      <span class="sticky-times"><span id="sticky-cur">0:00</span> / <span id="sticky-dur">0:00</span></span>
    </div>
    <div class="sticky-seek-row">
      <div class="sticky-seek" id="sticky-seek">
        <div class="sticky-seek-fill" id="sticky-fill"></div>
        <div class="sticky-seek-thumb" id="sticky-thumb"></div>
      </div>
    </div>
    <div class="sticky-controls">
      <button class="sticky-ctrl-btn" id="sticky-prev" title="F√∂reg√•ende dag">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6 8.5 6V6z"/></svg>
      </button>
      <button class="sticky-play-main" id="sticky-play-btn">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><polygon points="7,3 21,12 7,21" transform="translate(1,0)"/></svg>
      </button>
      <button class="sticky-ctrl-btn" id="sticky-next" title="N√§sta dag">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M18 6h-2v12h2zm-3.5 6L6 6v12z"/></svg>
      </button>
    </div>
  </div>

  <!-- ‚ë° Mini player ‚Äî spring-snaps up from below on scroll -->
  <div class="player-mini">
    <div class="mini-bar-track">
      <div class="mini-bar-fill" id="mini-fill"></div>
    </div>
    <div class="mini-text-row">
      <span class="mini-name" id="mini-name-display">‚Äì</span>
      <span class="mini-time" id="mini-time-display">0:00 / 0:00</span>
    </div>
  </div>

</div>

</body>
</html>
